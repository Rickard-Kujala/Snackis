@using Snackis.Pages
@using Snackis.Models
@model Models.Post
@using Microsoft.AspNetCore.Identity
@using Snackis.Areas.Identity.Data
@inject UserManager<SnackisUser> userManager
@inject Repositories.IUserRepository _userRepository
@{
    var AllPosts = (List<Post>)ViewData["AllPosts"];
    var MyUser = await userManager.GetUserAsync(User);
 }
@if (MyUser!= null)
{

<form asp- asp-page-handler="react" method="post">
    @if (_userRepository.GetUserReactions(Model, MyUser.Id,"Likes"))
    {
        <button class="btn btn-default" title="sluta gilla">
            <i class=" col-1 bi bi-hand-thumbs-up" title="sluta gilla">@Model.Likes</i>
        </button>
        <input type="hidden" name="regret" value="true" />

    }
    else
    {
        <button class="btn btn-default">
            <i class=" col-1 bi bi-hand-thumbs-up" title="gilla inlägget">@Model.Likes</i>
        </button>
    }
    <input type="hidden" name="id" value="@Model.Id" />
    <input type="hidden" name="value" value="Likes" />
</form>
<form asp-page-handler="react" method="post">
    @if (_userRepository.GetUserReactions(Model, MyUser.Id, "Dislikes"))
    {
        <button class="btn btn-default" title="ta bort ogilla">
            <i class=" col-1 bi bi-hand-thumbs-down">@Model.DisLikes</i>
        </button>
        <input type="hidden" name="regret" value="true" />

    }
    else
    {
        <button class="btn btn-default" title="ogilla">
            <i class=" col-1 bi bi-hand-thumbs-down">@Model.DisLikes</i>
        </button>

    }
    <input type="hidden" name="id" value="@Model.Id" />
    <input type="hidden" name="value" value="Dislikes" />
</form>
<form asp-page-handler="react" method="post">
    <button class="btn btn-default">
        <i class="bi bi-flag" title="rapportera"></i>
    </button>
    <input type="hidden" name="id" value="@Model.Id" />
    <input type="hidden" name="value" value="Abuse" />
</form>
}
